#! /usr/bin/env sh

set -e

current_layout() {
	setxkbmap -query | awk '/layout/{print $2}'
}

set_layout() {
	setxkbmap "$1"
}

notify() {
	notify-send -t 1500 "$@"
}

exists() {
	which "$1" >/dev/null 2>&1
	return $?
}

# Toggles keyboard layout between us and br
main() {
	current=$(current_layout)

	next=br
	if [ "$current" = br ]; then
		next=us
	fi

	set_layout "$next"

	if exists notify-send; then
		notify "keyboard: $next"
	fi
}

main
